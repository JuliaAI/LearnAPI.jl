<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Testing an Implementation · LearnAPI.jl</title><meta name="title" content="Testing an Implementation · LearnAPI.jl"/><meta property="og:title" content="Testing an Implementation · LearnAPI.jl"/><meta property="twitter:title" content="Testing an Implementation · LearnAPI.jl"/><meta name="description" content="Documentation for LearnAPI.jl."/><meta property="og:description" content="Documentation for LearnAPI.jl."/><meta property="twitter:description" content="Documentation for LearnAPI.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LearnAPI.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../anatomy_of_an_implementation/">Anatomy of an Implementation</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../reference/">Overview</a></li><li><a class="tocitem" href="../list_of_public_names/">Public Names</a></li><li><a class="tocitem" href="../fit_update/">fit/update</a></li><li><a class="tocitem" href="../predict_transform/">predict/transform</a></li><li><a class="tocitem" href="../kinds_of_target_proxy/">Kinds of Target Proxy</a></li><li><a class="tocitem" href="../obs/">obs and Data Interfaces</a></li><li><a class="tocitem" href="../features_target_weights/">features/target/weights</a></li><li><a class="tocitem" href="../accessor_functions/">Accessor Functions</a></li><li><a class="tocitem" href="../traits/">Learner Traits</a></li></ul></li><li><a class="tocitem" href="../common_implementation_patterns/">Common Implementation Patterns</a></li><li class="is-active"><a class="tocitem" href>Testing an Implementation</a><ul class="internal"><li><a class="tocitem" href="#Quick-start"><span>Quick start</span></a></li><li><a class="tocitem" href="#The-@testapi-macro"><span>The @testapi macro</span></a></li><li><a class="tocitem" href="#Learners-for-testing"><span>Learners for testing</span></a></li><li><a class="tocitem" href="#Private-methods"><span>Private methods</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Testing an Implementation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Testing an Implementation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaAI/LearnAPI.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaAI/LearnAPI.jl/blob/dev/docs/src/testing_an_implementation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Testing-an-Implementation"><a class="docs-heading-anchor" href="#Testing-an-Implementation">Testing an Implementation</a><a id="Testing-an-Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-an-Implementation" title="Permalink"></a></h1><p>Testing is provided by the LearnTestAPI.jl package documented below.</p><h2 id="Quick-start"><a class="docs-heading-anchor" href="#Quick-start">Quick start</a><a id="Quick-start-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-start" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI" href="#LearnTestAPI"><code>LearnTestAPI</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LearnTestAPI</code></pre><p>Module for testing implementations of the interface defined in <a href="https://juliaai.github.io/LearnAPI.jl/dev/">LearnAPI.jl</a>.</p><p>If your package defines an object <code>learner</code> implementing the interface, then put something like this in your test suite:</p><pre><code class="language-julia hljs">using LearnTestAPI

# create some test data:
X = ...
y = ...
data = (X, y)

# bump verbosity to debug:
@testapi learner data verbosity=1</code></pre><p>Once tests pass, set <code>verbosity=0</code> to suppress the detailed logging.</p><p>For details and options see <a href="#LearnTestAPI.@testapi"><code>LearnTestAPI.@testapi</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/LearnTestAPI.jl#L1-L26">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>New releases of LearnTestAPI.jl may add tests to <code>@testapi</code>, and this may result in new failures in client package test suites, because of previously undetected broken contracts. Adding a test to <code>@testapi</code> is not considered a breaking change to LearnTestAPI, unless it supports a breaking change to LearnAPI.jl.</p></div></div><h2 id="The-@testapi-macro"><a class="docs-heading-anchor" href="#The-@testapi-macro">The @testapi macro</a><a id="The-@testapi-macro-1"></a><a class="docs-heading-anchor-permalink" href="#The-@testapi-macro" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.@testapi" href="#LearnTestAPI.@testapi"><code>LearnTestAPI.@testapi</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@testapi learner dataset1 dataset2 ... verbosity=1</code></pre><p>Test that <code>learner</code> correctly implements the LearnAPI.jl interface, by checking contracts against one or more data sets.</p><pre><code class="language-julia hljs">using LearnTestAPI

X = (
    feature1 = [1, 2, 3],
    feature2 = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;],
    feature3 = [10.0, 20.0, 30.0],
)

@testapi MyFeatureSelector(; features=[:feature3,]) X verbosity=1</code></pre><p><strong>Extended help</strong></p><p><strong>Assumptions</strong></p><p>In some tests strict <code>==</code> is enforced on the output of <code>predict</code> or <code>transform</code>, unless <code>isapprox</code> is also implemented. If <code>predict</code> outputs categorical vectors, for example, then requiring <code>==</code> in a test is appropriate. On the other hand, if <code>predict</code> outputs some abstract vector of eltype <code>Float32</code>, it will be necessary that <code>isapprox</code> is implemented for that vector type, because the strict test <code>==</code> is likely to fail. These comments apply to more complicated objects, such as probability distributions or sampleable objects: If <code>==</code> is likely to fail in &quot;benign&quot; cases, be sure <code>isapprox</code> is implemented. See <a href="#LearnTestAPI.isnear"><code>LearnTestAPI.isnear</code></a> for the exact test applied.</p><p><strong>What is not tested?</strong></p><p>When <code>verbosity=1</code> (the default) the test log describes all contracts tested.</p><p>The following are <em>not</em> tested:</p><ul><li><p>That the output of <code>LearnAPI.target(learner, data)</code> is indeed a target, in the sense that it can be paired, in some way, with the output of <code>predict</code>. Such a test would be to suitably pair the output with a predicted proxy for the target, using, for example, a proper scoring rule, in the case of probabilistic predictions.</p></li><li><p>That <code>inverse_transform</code> is an approximate left or right inverse to <code>transform</code></p></li><li><p>That the one-line convenience methods, <code>transform(learner, ...)</code> or <code>predict(learner, ...)</code>, where implemented, have the same effect as the two-line calls they combine.</p></li><li><p>The veracity of <code>LearnAPI.is_pure_julia(learner)</code>.</p></li><li><p>The second of the two contracts appearing in the <a href="../traits/#LearnAPI.target_observation_scitype"><code>LearnAPI.target_observation_scitype</code></a> docstring. The first contract is only tested if <code>LearnAPI.data_interface(learner)</code> is <code>LearnAPI.RandomAccess()</code> or <code>LearnAPI.FiniteIterable()</code>.</p></li></ul><p>Whenever the internal <code>learner</code> algorithm involves case distinctions around data or hyperparameters, it is recommended that multiple datasets, and learners with a variety of hyperparameter settings, are explicitly tested.</p><p><strong>Role of datasets in tests</strong></p><p>Each <code>dataset</code> is used as follows.</p><p>If <code>LearnAPI.is_static(learner) == false</code>, then:</p><ul><li><p><code>dataset</code> is passed to <code>fit</code> and, if necessary, its <code>update</code> cousins</p></li><li><p>If <code>X = LearnAPI.features(learner, dataset) == nothing</code>, then <code>predict</code> and/or <code>transform</code> are called with no data. Otherwise, they are called with <code>X</code>.</p></li></ul><p>If instead <code>LearnAPI.is_static(learner) == true</code>, then <code>fit</code> and its cousins are called without any data, and <code>dataset</code> is passed directly to <code>predict</code> and/or <code>transform</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/testapi.jl#L1-L73">source</a></section></article><h2 id="Learners-for-testing"><a class="docs-heading-anchor" href="#Learners-for-testing">Learners for testing</a><a id="Learners-for-testing-1"></a><a class="docs-heading-anchor-permalink" href="#Learners-for-testing" title="Permalink"></a></h2><p>LearnTestAPI.jl provides some simple, tested, LearnAPI.jl implementations, which may be useful for testing learner wrappers and meta-algorithms.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.Ridge" href="#LearnTestAPI.Ridge"><code>LearnTestAPI.Ridge</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Ridge(; lambda=0.1)</code></pre><p>Instantiate a ridge regression learner, with regularization of <code>lambda</code>. Data can be provided to <code>fit</code> or <code>predict</code> in any form supported by the <code>Saffron</code> data front end at LearnDataFrontEnds.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/regression.jl#L21-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.BabyRidge" href="#LearnTestAPI.BabyRidge"><code>LearnTestAPI.BabyRidge</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BabyRidge(; lambda=0.1)</code></pre><p>Instantiate a ridge regression learner, with regularization of <code>lambda</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/regression.jl#L129-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.ConstantClassifier" href="#LearnTestAPI.ConstantClassifier"><code>LearnTestAPI.ConstantClassifier</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ConstantClassifier()</code></pre><p>Instantiate a constant (dummy) classifier. Can predict <code>Point</code> or <code>Distribution</code> targets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/classification.jl#L15-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.TruncatedSVD" href="#LearnTestAPI.TruncatedSVD"><code>LearnTestAPI.TruncatedSVD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TruncatedSVD(; codim=1)</code></pre><p>Instantiate a truncated singular value decomposition algorithm for reducing the dimension of observations by <code>codim</code>.</p><p>Data can be provided to <code>fit</code> or <code>transform</code> in any form supported by the <code>Tarragon</code> data front end at LearnDataFrontEnds.jl. However, the outputs of <code>transform</code> and <code>inverse_transform</code> are always matrices.</p><pre><code class="language-julia hljs">learner = Truncated()
X = rand(3, 100)  # 100 observations in 3-space
model = fit(learner, X)
W = transform(model, X)
X_reconstructed = inverse_transform(model, W)
LearnAPI.extras(model) # returns indim, outdim and singular values</code></pre><p>The following fits and transforms in one go:</p><pre><code class="language-julia hljs">W = transform(learner, X)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/dimension_reduction.jl#L21-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.Selector" href="#LearnTestAPI.Selector"><code>LearnTestAPI.Selector</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Selector(; names=Symbol[])</code></pre><p>Instantiate a static transformer that selects only the feature specified by <code>names</code>.</p><pre><code class="language-julia hljs">learner = Selector(names=[:x, :w])
X = DataFrames.DataFrame(rand(3, 4), [:x, :y, :z, :w])
model = fit(learner) # no data arguments!
W = transform(model, X)

# one-liner:
@assert transform(learner, X) == W</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/static_algorithms.jl#L19-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.FancySelector" href="#LearnTestAPI.FancySelector"><code>LearnTestAPI.FancySelector</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FancySelector(; names=Symbol[])</code></pre><p>Instantiate a feature selector that exposes the names of rejected features. Inputs for transform are expected to be tables.</p><pre><code class="language-julia hljs">learner = FancySelector(names=[:x, :w])
X = DataFrames.DataFrame(rand(3, 4), [:x, :y, :z, :w])
model = fit(learner) # no data arguments!
transform(model, X)  # mutates `model`
@assert rejected(model) == [:y, :z]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/static_algorithms.jl#L84-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.NormalEstimator" href="#LearnTestAPI.NormalEstimator"><code>LearnTestAPI.NormalEstimator</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NormalEstimator()</code></pre><p>Instantiate a learner for finding the maximum likelihood normal distribution fitting some real univariate data <code>y</code>. Estimates can be updated with new data.</p><pre><code class="language-julia hljs">model = fit(NormalEstimator(), y)
d = predict(model) # returns the learned `Normal` distribution</code></pre><p>While the above is equivalent to the single operation <code>d = predict(NormalEstimator(), y)</code>, the above workflow allows for the presentation of additional observations post facto: The following is equivalent to <code>d2 = predict(NormalEstimator(), vcat(y, ynew))</code>:</p><pre><code class="language-julia hljs">update_observations(model, ynew)
d2 = predict(model)</code></pre><p>Inspect all learned parameters with <code>LearnAPI.extras(model)</code>. Predict a 95% confidence interval with <code>predict(model, ConfidenceInterval())</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/incremental_algorithms.jl#L15-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.Ensemble" href="#LearnTestAPI.Ensemble"><code>LearnTestAPI.Ensemble</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Ensemble(atom; rng=Random.default_rng(), n=10)</code></pre><p>Instantiate a bagged ensemble of <code>n</code> regressors, with base regressor <code>atom</code>, etc.</p><pre><code class="language-julia hljs">X = rand(3, 100)
y = rand(100)

atom = LearnAPI.Ridge()
learner = LearnTestAPI.Ensemble(atom, n=20)
model = fit(learner, (X, y))

# increase ensemble size by 5:
model = update(model, (X, y), :n =&gt; 15)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/ensembling.jl#L30-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.StumpRegressor" href="#LearnTestAPI.StumpRegressor"><code>LearnTestAPI.StumpRegressor</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StumpRegressor(; ntrees=10, fraction_train=0.8, rng=Random.default_rng())</code></pre><p>Instantiate an extremely randomized forest of stump regressors, for training using the LearnAPI.jl interface, as in the example below. By default, 20% of the data is internally set aside to allow for tracking an out-of-sample loss. Internally computed predictions (on the full data) are also exposed to the user.</p><pre><code class="nohighlight hljs">x = rand(100)
y = sin.(x)

learner = LearnTestAPI.StumpRegressor(ntrees=100)

# train regressor with 100 tree stumps, printing running out-of-sample loss:
model = fit(learner, (x, y), verbosity=2)

# add 400 stumps:
model = update(model, (x, y), ntrees=500)

# predict:
@assert predict(model, x) ≈ LearnAPI.predictions(model)

# inspect other byproducts of training:
LearnAPI.training_losses(model)
LearnAPI.out_of_sample_losses(model)
LearnAPI.trees(model)
</code></pre><p>Only univariate data is supported. Data is cached and <code>update(model, data; ...)</code> ignores <code>data</code>.</p><p><strong>Algorithm</strong></p><p>Predictions in this extremely simplistic algorithm (not intended for practical application) are averages over an ensemble of decision tree stumps. Each new stump has it&#39;s feature split threshold chosen uniformly at random, between the minimum and maximum values present in the training data. Predictions on new feature values to the left (resp., right) of the threshold are the mean target values for training observations in which the feature is less than (resp., greater than) the threshold.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/learners/ensembling.jl#L301-L343">source</a></section></article><h2 id="Private-methods"><a class="docs-heading-anchor" href="#Private-methods">Private methods</a><a id="Private-methods-1"></a><a class="docs-heading-anchor-permalink" href="#Private-methods" title="Permalink"></a></h2><p>For LearnTestAPI.jl developers only, and subject to breaking changes at any time:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.@logged_testset" href="#LearnTestAPI.@logged_testset"><code>LearnTestAPI.@logged_testset</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LearnTestAPI.@logged_testset message verbosity ex</code></pre><p><em>Private method.</em></p><p>Similar to <code>Test.@testset</code> with the exception that you can make <code>message</code> longer without loss of clarity, and this message is reported according to the extra parameter <code>verbosity</code> provided:</p><ul><li><p>If <code>verbosity &gt; 0</code> then <code>message</code> is always logged to <code>Logging.Info</code></p></li><li><p>If <code>verbosity ≤ 0</code> then <code>message</code> is only logged if a <code>@test</code> call in <code>ex</code> fails on evaluation.</p></li></ul><p>Note that variables defined within the program <code>ex</code> are local, and so are not available in subsequent <code>@logged_testset</code> calls. However, the last evaluated expression in <code>ex</code> is the return value.</p><pre><code class="language-julia-repl hljs">julia&gt; f(x) = x^2
julia&gt; LearnTestAPI.@logged_testset &quot;Testing `f`&quot; 1 begin
           y = f(2)
           @test y &gt; 0
           y
       end
[ Info: Testing `f`
4

julia&gt; LearnTestAPI.@logged_testset &quot;Testing `f`&quot; 0 begin
           y = f(2)
           @test y &lt; 0
           y
       end
Test Failed at REPL[41]:3
  Expression: y &lt; 0
   Evaluated: 4 &lt; 0

[ Info: Context of failure:
[ Info: Testing `f`
ERROR: There was an error during testing</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L1-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.@nearly" href="#LearnTestAPI.@nearly"><code>LearnTestAPI.@nearly</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@nearly lhs == rhs kwargs...</code></pre><p><em>Private method.</em></p><p>Replaces the expression <code>lhs == rhs</code> with <code>isnear(lhs, rhs; kwargs...)</code> for testing a weaker form of equality. Here <code>kwargs...</code> are keyword arguments accepted in <code>isapprox(lhs, rhs; kwargs...)</code>, which is called if <code>lhs == rhs</code> fails.</p><p>See also <a href="#LearnTestAPI.isnear"><code>LearnTestAPI.isnear</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L135-L146">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.isnear" href="#LearnTestAPI.isnear"><code>LearnTestAPI.isnear</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isnear(x, y; kwargs...)</code></pre><p><em>Private method.</em></p><p>Returns <code>true</code> if <code>x == y</code>. Otherwise try to return <code>isapprox(x, y; kwargs...)</code>.</p><pre><code class="language-julia hljs">julia&gt; near(&#39;a&#39;, &#39;a&#39;)
true

julia&gt; near(&#39;a&#39;, &#39;b&#39;)
[ Info: Tried testing for `≈` because `==` failed.
ERROR: MethodError: no method matching isapprox(::Char, ::Char)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L108-L124">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.learner_get" href="#LearnTestAPI.learner_get"><code>LearnTestAPI.learner_get</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">learner_get(learner, data, apply=identity)</code></pre><p><em>Private method.</em></p><p>Extract from <code>LearnAPI.obs(learner, data)</code>, after applying <code>apply</code>, all observations, using the data access API specified by <code>LearnAPI.data_interface(learner)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L80-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.model_get" href="#LearnTestAPI.model_get"><code>LearnTestAPI.model_get</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">model_get(model, data)</code></pre><p><em>Private method.</em></p><p>Extract from <code>LearnAPI.obs(model, data)</code>, after applying <code>apply</code>, all observations, using the data access API specified by <code>LearnAPI.data_interface(learner)</code>, where <code>learner = LearnAPI.learner(model)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L92-L101">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.verb" href="#LearnTestAPI.verb"><code>LearnTestAPI.verb</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LearaAPI.verb(ex)</code></pre><p><em>Private method.</em></p><p>If <code>ex</code> is a specification of <code>verbosity</code>, such as <code>:(verbosity=1)</code>, then return the specified value; otherwise, return <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L221-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LearnTestAPI.filter_out_verbosity" href="#LearnTestAPI.filter_out_verbosity"><code>LearnTestAPI.filter_out_verbosity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LearnAPI.filter_out_verbosity(exs)</code></pre><p><em>Private method.</em></p><p>Return <code>(filtered_exs, verbosity)</code> where <code>filtered_exs</code> is <code>exs</code> with any <code>verbosity</code> specification dropped, and <code>verbosity</code> is the verbosity value (<code>1</code> if not specified).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/LearnTestAPI.jl/blob/v0.2.2/src/tools.jl#L239-L248">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../common_implementation_patterns/">« Common Implementation Patterns</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 20 February 2025 22:41">Thursday 20 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
